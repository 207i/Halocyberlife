<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>RESONANT PHOTONIC AMPLIFICATION SYSTEM | (RPAS)</title>
  <meta name="description" content="A concept technology exploring frequency-driven photonic excitation: how resonance could amplify light emission from engineered layers—without relying on traditional light sources." />
  <meta name="author" content="Luis Amaya" />
  <meta name="keywords" content="resonance, photonics, frequency, experimental technology, luminescence, excitation, Halocyberlife" />

  <style>
    /* ───────────────────────────────────────────────────────────────────────── */
    /* BASIC VARIABLES */
    :root {
      --bg: #020617;
      --text: #f9fafb;
      --muted: #9ca3af;
      --soft: #d1d5db;
      --border: rgba(148,163,184,0.28);
      --accent: #22d3ee;
      --accent2: #8b5cf6;
      --radius: 18px;
      --shadow: 0 18px 60px rgba(0,0,0,0.45);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      background: radial-gradient(circle at top, #111827 0%, #020617 55%, #02040a 100%);
      color: var(--text);
      line-height: 1.6;
    }

    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }

    .container {
      width: 100%;
      max-width: 980px;
      margin: 0 auto;
      padding: 0 1.25rem;
    }

    /* ───────────────────────────────────────────────────────────────────────── */
    /* HEADER + NAV */
    header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(0,0,0,0.65);
      border-bottom: 1px solid rgba(255,255,255,0.08);
      backdrop-filter: blur(12px);
    }

    .header-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      padding: .9rem 0;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: .65rem;
      font-weight: 700;
      letter-spacing: .05em;
      text-transform: uppercase;
      font-size: .9rem;
      color: var(--text);
      white-space: nowrap;
    }
    .brand img { width: 40px; height: 40px; }

    .nav-wrap { display: flex; align-items: center; gap: .6rem; }
    nav {
      display: flex;
      align-items: center;
      gap: .4rem;
    }
    nav a {
      padding: .5rem .9rem;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      font-size: .85rem;
      letter-spacing: .08em;
      text-transform: uppercase;
      background: rgba(255,255,255,0.05);
      color: var(--text);
    }
    nav a:hover {
      border-color: rgba(34,211,238,0.65);
      box-shadow: 0 0 18px rgba(34,211,238,0.18);
    }

    .menu-btn {
      display: none;
      width: 42px;
      height: 42px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(255,255,255,0.06);
      color: #fff;
      font-size: 1.1rem;
      cursor: pointer;
    }
    .menu-btn:hover {
      border-color: rgba(34,211,238,0.65);
      box-shadow: 0 0 18px rgba(34,211,238,0.18);
    }

    @media (max-width: 720px) {
      .menu-btn { display: inline-grid; place-items: center; }
      nav {
        position: absolute;
        top: 68px;
        right: 1.25rem;
        flex-direction: column;
        padding: 10px;
        border-radius: 16px;
        border: 1px solid rgba(255,255,255,0.12);
        background: rgba(2,6,23,0.92);
        box-shadow: var(--shadow);
        display: none;
        min-width: 210px;
      }
      nav.open { display: flex; }
      nav a { width: 100%; text-align: center; }
    }

    /* ───────────────────────────────────────────────────────────────────────── */
    /* ARTICLE HEADER */
    .article-head { text-align: center; margin: 1rem auto 1.25rem; }

    .meta {
      color: var(--muted);
      font-size: .85rem;
      letter-spacing: .12em;
      text-transform: uppercase;
      margin-bottom: .6rem;
    }

    h1 {
      font-size: clamp(2.05rem, 3.4vw, 2.85rem);
      letter-spacing: -0.015em;
      margin-bottom: .65rem;
    }

    .subtitle {
      color: var(--soft);
      max-width: 820px;
      margin: .2rem auto 0;
      font-size: 1.02rem;
    }

    .cta {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin: 1rem 0 .2rem;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(255,255,255,0.06);
      font-size: .92rem;
      letter-spacing: .08em;
      text-transform: uppercase;
      color: #fff;
      cursor: pointer;
    }
    .btn:hover {
      border-color: rgba(34,211,238,0.65);
      box-shadow: 0 0 18px rgba(34,211,238,0.18);
    }
    .btn.primary {
      border-color: rgba(34,211,238,0.55);
      background: linear-gradient(90deg, rgba(34,211,238,0.18), rgba(139,92,246,0.14));
    }
    .btn.secondary {
      border-color: rgba(139,92,246,0.55);
      background: rgba(139,92,246,0.10);
    }

    .tag-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
      margin-top: 10px;
    }
    .pill {
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.16);
      font-size: .86rem;
      color: var(--text);
      letter-spacing: .04em;
    }

    /* ───────────────────────────────────────────────────────────────────────── */
    /* SLIDER */
    .vision-slider { margin: 1.25rem auto 1.3rem; }
    .vision-viewport {
      position: relative;
      overflow: hidden;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.03);
      box-shadow: var(--shadow);
    }

    .vision-track {
      display: flex;
      transition: transform .45s ease;
    }
    .vision-slide {
      flex: 0 0 100%;
    }
    .vision-slide img {
      width: 100%;
      height: clamp(240px, 44vw, 520px);
      object-fit: cover;
      display: block;
    }
    .vision-slide figcaption {
      padding: .75rem .9rem;
      font-size: .96rem;
      background: rgba(2,6,23,0.62);
      color: rgba(209,213,219,0.92);
      border-top: 1px solid rgba(255,255,255,0.08);
    }

    .vision-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 42px;
      height: 42px;
      border: 1px solid rgba(255,255,255,0.18);
      border-radius: 999px;
      background: rgba(2,6,23,0.55);
      color: #fff;
      font-size: 1.6rem;
      cursor: pointer;
      display: grid;
      place-items: center;
      z-index: 5;
    }
    .vision-prev { left: 12px; }
    .vision-next { right: 12px; }

    .vision-dots {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 12px;
    }
    .vision-dot {
      width: 10px; height: 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.35);
      background: rgba(255,255,255,0.10);
      cursor: pointer;
    }
    .vision-dot[aria-selected="true"] {
      background: rgba(34,211,238,0.9);
      border-color: rgba(34,211,238,0.95);
    }

    .note {
      margin-top: 10px;
      color: rgba(209,213,219,0.82);
      font-size: .92rem;
      text-align: center;
    }

    /* ───────────────────────────────────────────────────────────────────────── */
    /* ARTICLE BODY */
    .article-body {
      max-width: 820px;
      margin: 0 auto;
      padding-top: 1rem;
      font-size: 1.02rem;
      color: rgba(209,213,219,0.92);
    }
    .article-body h2 {
      margin: 1.6rem 0 .6rem;
      font-size: 1.38rem;
      color: var(--text);
    }
    .article-body p { margin: .78rem 0; }

    hr {
      border-top: 1px solid rgba(148,163,184,0.35);
      margin: 1.6rem 0;
    }

    /* ───────────────────────────────────────────────────────────────────────── */
    /* GRID CARDS */
    .cards-grid {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(2, 1fr);
    }
    @media (max-width: 760px) {
      .cards-grid { grid-template-columns: 1fr; }
    }

    .feature-card {
      border: 1px solid rgba(148,163,184,0.28);
      border-radius: var(--radius);
      background: rgba(255,255,255,0.04);
      overflow: hidden;
      transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
      min-height: 260px;
    }
    .feature-card:hover {
      transform: translateY(-2px);
      border-color: rgba(34,211,238,0.55);
      box-shadow: 0 0 26px rgba(34,211,238,0.08);
    }
    .card-media {
      width: 100%;
      height: 170px;
      object-fit: cover;
      display: block;
      background: rgba(255,255,255,0.06);
      border-bottom: 1px solid rgba(255,255,255,0.08);
      cursor: zoom-in;
    }
    .card-body { padding: 14px; }
    .feature-card h3 {
      margin: 0 0 .35rem;
      font-size: 1.05rem;
      color: var(--text);
    }
    .feature-card p {
      margin: 0;
      color: rgba(209,213,219,0.9);
      font-size: .98rem;
    }
    .tag {
      display: inline-block;
      margin-top: .75rem;
      padding: .25rem .6rem;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(255,255,255,0.05);
      color: rgba(209,213,219,0.9);
      font-size: .78rem;
      text-transform: uppercase;
      letter-spacing: .08em;
    }

    /* ───────────────────────────────────────────────────────────────────────── */
    /* LIGHTBOX */
    .lightbox {
      position: fixed;
      inset: 0;
      display: none;
      place-items: center;
      background: rgba(0,0,0,0.72);
      padding: 22px;
      backdrop-filter: blur(10px);
      z-index: 9999;
    }
    .lightbox.open { display: grid; }

    .lightbox__panel {
      width: min(980px, 100%);
      background: rgba(2,6,23,0.86);
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,0.14);
      box-shadow: 0 28px 120px rgba(0,0,0,0.65);
      overflow: hidden;
      opacity: 0;
      transform: translateY(8px) scale(0.985);
      transition: transform .22s ease, opacity .22s ease;
    }
    .lightbox.open .lightbox__panel {
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    .lightbox__top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
      border-bottom: 1px solid rgba(255,255,255,0.10);
    }
    .lightbox__title {
      font-size: .92rem;
      text-transform: uppercase;
      letter-spacing: .08em;
      color: rgba(229,231,235,0.92);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .lightbox__btn {
      width: 40px;
      height: 40px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(255,255,255,0.06);
      border-radius: 999px;
      color: #fff;
      font-size: 1.05rem;
      cursor: pointer;
      display: grid;
      place-items: center;
    }
    .lightbox__btn:hover {
      border-color: rgba(34,211,238,0.65);
      box-shadow: 0 0 18px rgba(34,211,238,0.20);
    }

    .lightbox__stage { padding: 14px; perspective: 900px; }
    .lightbox__imgWrap {
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.04);
      overflow: hidden;
      transition: transform .12s ease;
      will-change: transform;
    }
    .lightbox__img {
      width: 100%; height: auto;
      max-height: 72vh;
      object-fit: contain;
      background: rgba(255,255,255,0.03);
    }

    .lightbox__nav .lightbox__arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 44px; height: 44px;
      background: rgba(2,6,23,0.55);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.18);
      font-size: 1.6rem;
      cursor: pointer;
      display: grid; place-items: center;
      border-radius: 999px;
    }
    .lightbox__arrow:hover {
      border-color: rgba(34,211,238,0.65);
      box-shadow: 0 0 18px rgba(34,211,238,0.20);
    }
    .lightbox__arrow.prev { left: 10px; }
    .lightbox__arrow.next { right: 10px; }

    /* ───────────────────────────────────────────────────────────────────────── */
    footer {
      border-top: 1px solid rgba(148,163,184,0.25);
      padding: 1.5rem 0 2rem;
      color: rgba(156,163,175,0.9);
      font-size: .9rem;
      text-align: center;
      margin-top: 2rem;
    }
  </style>
</head>

<body>
  <header>
    <div class="container header-inner">
      <div class="brand">
        <img src="../images/negative_white_halocyberlife_logo.png" alt="Halocyberlife logo" />
        <span>Halocyberlife</span>
      </div>
      <div class="nav-wrap">
        <button class="menu-btn" type="button" id="menuBtn" aria-label="Toggle nav">☰</button>
        <nav id="mainNav">
          <a href="../index.html">Home</a>
          <a href="../blog.html">Articles</a>
        </nav>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="article-head">
      <p class="meta">Experiments & Tech · Resonance / Photonics</p>
      <h1>Resonant Photonic Amplification System: Using Frequency to Amplify Light Emission</h1>
      <p class="subtitle">
        A novel system that uses acoustic and electromagnetic resonance to amplify light emission in engineered photonic layers — enabling illumination without traditional bulbs, LEDs, or filaments.
      </p>
      <div class="cta">
        <a class="btn primary" href="#" target="_blank" rel="noopener">View Official Patent Link ↗</a>
        <button class="btn secondary" type="button" id="jumpToPossibilities">Explore World-Changing Uses</button>
      </div>

      <div class="tag-row">
        <span class="pill"><strong>Core idea:</strong> resonant amplification</span>
        <span class="pill"><strong>Goal:</strong> bulb-less light generation</span>
        <span class="pill"><strong>Method:</strong> acoustic & EM stimulation</span>
        <span class="pill"><strong>Structure:</strong> multi-layer photonic stack</span>
      </div>
    </section>

    <!-- SLIDER -->
    <section class="vision-slider">
      <div class="vision-viewport">
        <div class="vision-track">
          <figure class="vision-slide">
            <img src="./Images/blog_images/Resonance_Amplification/RPAS_Internal_Amplification_Module_Cutaway.png" alt="Architectural surfaces emitting light through resonance-driven activation" loading="eager" />
            <figcaption>Embedded photonic surfaces — materials that emit light when activated by resonant stimulation.</figcaption>
          </figure>
          <figure class="vision-slide">
            <img src="./Images/blog_images/Resonance_Amplification/RPAS_CrossSectional_Driver_Interface.png" alt="Control interface for RPAS frequency activation system" loading="lazy" />
            <figcaption>Control architecture — converts signal input into targeted resonance for activation.</figcaption>
          </figure>
          <figure class="vision-slide">
            <img src="./Images/blog_images/Resonance_Amplification/RPAS_Core_Amplification_Stack_Render.png" alt="Layered resonant photonic amplification system stack" loading="lazy" />
            <figcaption>Layered system — engineered materials arranged for dielectric resonance.</figcaption>
          </figure>
          <figure class="vision-slide">
            <img src="./Images/blog_images/Resonance_Amplification/RPAS_Exploded_Architecture_Labeled.png" alt="Interface diagram showing coupling regions and emission zones" loading="lazy" />
            <figcaption>Coupling zones — optimized for light amplification under resonance input.</figcaption>
          </figure>
        </div>

        <button class="vision-btn vision-prev" type="button" aria-label="Previous slide">‹</button>
        <button class="vision-btn vision-next" type="button" aria-label="Next slide">›</button>
      </div>

      <div class="vision-dots" role="tablist" aria-label="Slide navigation"></div>

      <p class="note">
        <strong>Concept Visuals:</strong> Illustrations for storytelling and education — not product renders.
      </p>
    </section>

    <!-- MOVED FIGURE OUTSIDE SLIDER -->
    <figure style="margin: 2rem auto; text-align: center;">
      <img src="./Images/blog_images/rpas_material_interface_coupling.png" alt="Future city illuminated by embedded RPAS photonic layers" style="width:100%; border-radius:16px; max-width:1000px;" />
      <figcaption style="margin-top:.8rem; color:var(--muted);">
        <strong>Figure: RPAS Urban Integration Concept</strong> — A conceptual vision of environments illuminated by RPAS surfaces — without visible fixtures.
      </figcaption>
    </figure>

    <!-- ARTICLE BODY -->
    <article class="article-body">
      <p>Picture a space with no visible lights — no bulbs, no panels, no fixtures at all. Just surface.</p>
      <p>Then, with a signal — vibration, frequency, pressure — those surfaces begin to emit light. Not through projection, but through direct resonance.</p>
    </article>

    <hr />

    <section class="possibilities" id="possibilities">
      <h2>Possibilities That Change the Game</h2>
      <p class="lead">If materials can be designed to emit more light when properly excited, the ripple effects are huge — not just for lighting, but for sensing, signaling, architecture, safety, and displays.</p>

      <div class="cards-grid" id="cardsGrid">
        <!-- CARD: Living Architecture -->
        <article class="feature-card">
          <img class="card-media" src="./Images/blog_images/Resonance_Amplification/RPAS_Exploded_Architecture_Labeled.png" alt="Living architecture concept" loading="lazy" />
          <div class="card-body">
            <h3>Living architecture</h3>
            <p>Walls, ceilings, corridors, public spaces with embedded illumination response — fewer fixtures, fewer failure points.</p>
            <span class="tag">Built-in light</span>
          </div>
        </article>

        <!-- CARD: Ultra-low Profile Lighting -->
        <article class="feature-card">
          <img class="card-media" src="./Images/blog_images/Resonance_Amplification/RPAS_Internal_Amplification_Module_Cutaway.png" alt="Ultra-low profile lighting concept" loading="lazy" />
          <div class="card-body">
            <h3>Ultra-low profile lighting</h3>
            <p>Thin surfaces glow without bulky assemblies — ideal in tight spaces, vehicles, and wearables.</p>
            <span class="tag">Slim systems</span>
          </div>
        </article>

        <!-- CARD: Adaptive Environments -->
        <article class="feature-card">
          <img class="card-media" src="./Images/blog_images/Resonance_Amplification/RPAS_CrossSectional_Driver_Interface.png" alt="Adaptive light control concept" loading="lazy" />
          <div class="card-body">
            <h3>Adaptive environments</h3>
            <p>Light intensity and tone shaped by frequency patterns — like waveform lighting presets.</p>
            <span class="tag">Waveform presets</span>
          </div>
        </article>

        <!-- CARD: Emergency Redundancy -->
        <article class="feature-card">
          <img class="card-media" src="./Images/blog_images/Futuristic_photonic_resonance_structure.png" alt="Emergency redundancy concept" loading="lazy" />
          <div class="card-body">
            <h3>Emergency + redundancy</h3>
            <p>Surfaces with multiple excitation methods — if one fails, another still triggers visibility.</p>
            <span class="tag">Failsafe modes</span>
          </div>
        </article>

        <!-- VIDEO CARD (Span 2) -->
        <article class="feature-card" style="grid-column: span 2; display: flex; justify-content: center; align-items: center;">
          <div style="position:relative; width:100%; padding-bottom:56.25%;">
            <iframe src="https://www.youtube.com/embed/enHb_FBTWtU"
                    title="BioGlow™ v2 — Light Emission Through Resonant Energy"
                    style="position:absolute; top:0; left:0; width:100%; height:100%; border:0;"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    allowfullscreen></iframe>
          </div>
        </article>

        <!-- ADDITIONAL CARDS -->
        <article class="feature-card">
          <img class="card-media" src="./Images/blog_images/Futuristic_resonance_in_photonic_technology.png" alt="New display paradigm concept" loading="lazy" />
          <div class="card-body">
            <h3>New display paradigms</h3>
            <p>Not just screens — materials that become emissive where and when stimulated.</p>
            <span class="tag">Material display</span>
          </div>
        </article>

        <article class="feature-card">
          <img class="card-media" src="./Images/blog_images/Resonance_Amplification/RPAS_Core_Amplification_Stack_Render.png" alt="Navigation markers concept" loading="lazy" />
          <div class="card-body">
            <h3>Signals, markers, navigation</h3>
            <p>Wayfinding strips and hazard indicators activated by tuned excitation patterns.</p>
            <span class="tag">Guidance + safety</span>
          </div>
        </article>

        <article class="feature-card">
          <img class="card-media" src="./Images/blog_images/Resonance_Amplification/RPAS_CrossSectional_Driver_Interface.png" alt="Layer stack concept" loading="lazy" />
          <div class="card-body">
            <h3>Layered emission stacks</h3>
            <p>Stack engineering: coupling, dopants, resonance-friendly interfaces for controlled emission.</p>
            <span class="tag">Layer stack</span>
          </div>
        </article>

      </div>
    </section>

    <hr />

    <footer>
      <div class="container">
        <img src="../images/negative_white_halocyberlife_logo.png" alt="Halocyberlife Logo" style="height:42px; margin-bottom:1rem;" />
        <p style="color: var(--muted); font-size:.92rem;">
          © <span id="year"></span> Halocyberlife · All rights reserved. Built by Luis Amaya.
        </p>
        <nav style="margin:1rem 0;">
          <a href="../index.html">Home</a> ·
          <a href="../blog.html">Articles</a> ·
          <a href="../about.html">About</a> ·
          <a href="../contact.html">Contact</a>
        </nav>
      </div>
    </footer>

  </main>

  <!-- LIGHTBOX MODAL -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="lightbox__panel" role="dialog" aria-modal="true">
      <div class="lightbox__top">
        <div class="lightbox__title" id="lightboxTitle">Preview</div>
        <div style="display:flex; gap:10px;">
          <button class="lightbox__btn" type="button" id="lightboxPrev">‹</button>
          <button class="lightbox__btn" type="button" id="lightboxNext">›</button>
          <button class="lightbox__btn" type="button" id="lightboxClose">✕</button>
        </div>
      </div>
      <div class="lightbox__stage">
        <div class="lightbox__imgWrap" id="lightboxWrap">
          <img class="lightbox__img" id="lightboxImg" alt="" />
        </div>
        <div class="lightbox__nav">
          <button class="lightbox__arrow prev" id="lightboxArrowPrev">‹</button>
          <button class="lightbox__arrow next" id="lightboxArrowNext">›</button>
        </div>
      </div>
      <div class="lightbox__caption" id="lightboxCaption"></div>
    </div>
  </div>

  <script>
    (() => {
      /* FOOTER YEAR */
      const yearEl = document.getElementById("year");
      if (yearEl) yearEl.textContent = new Date().getFullYear();

      /* MOBILE MENU TOGGLE */
      const menuBtn = document.getElementById("menuBtn"), nav = document.getElementById("mainNav");
      if (menuBtn && nav) {
        menuBtn.addEventListener("click", () => nav.classList.toggle("open"));
        nav.querySelectorAll("a").forEach(a => a.addEventListener("click", () => nav.classList.remove("open")));
      }

      /* SMOOTH SCROLL BUTTON */
      const jumpBtn = document.getElementById("jumpToPossibilities"), poss = document.getElementById("possibilities");
      if (jumpBtn && poss) jumpBtn.addEventListener("click", () => poss.scrollIntoView({ behavior: "smooth" }));

      /* SLIDER */
      const slider = document.querySelector(".vision-slider");
      if (slider) {
        const track = slider.querySelector(".vision-track"),
              slides = Array.from(slider.querySelectorAll(".vision-slide")),
              prevBtn = slider.querySelector(".vision-prev"),
              nextBtn = slider.querySelector(".vision-next"),
              dotsWrap = slider.querySelector(".vision-dots");

        if (track && slides.length) {
          let index = 0, timer = null;
          dotsWrap.innerHTML = "";

          slides.forEach((_, i) => {
            const dot = document.createElement("button");
            dot.className = "vision-dot";
            dot.setAttribute("aria-selected", i === 0 ? "true" : "false");
            dot.addEventListener("click", () => goTo(i, true));
            dotsWrap.appendChild(dot);
          });
          const dots = Array.from(dotsWrap.querySelectorAll(".vision-dot"));

          const update = () => {
            track.style.transform = `translateX(-${index * 100}%)`;
            dots.forEach((d,i) => d.setAttribute("aria-selected", i === index ? "true" : "false"));
          };
          const goTo = (i,user=false) => { index = (i + slides.length) % slides.length; update(); if(user) start(); };
          const next = (user=false) => goTo(index+1,user);
          const prev = (user=false) => goTo(index-1,user);

          prevBtn.addEventListener("click",()=>prev(true));
          nextBtn.addEventListener("click",()=>next(true));

          const start = () => {
            if(timer) clearInterval(timer);
            timer = setInterval(()=>next(false), 5000);
          };
          slider.addEventListener("mouseenter",()=>{ if(timer) clearInterval(timer); });
          slider.addEventListener("mouseleave", start);

          update();
          start();
        }
      }

      /* LIGHTBOX */
      const grid = document.getElementById("cardsGrid"),
            lb = document.getElementById("lightbox"),
            lbImg = document.getElementById("lightboxImg"),
            lbTitle = document.getElementById("lightboxTitle"),
            lbCaption = document.getElementById("lightboxCaption"),
            btnClose = document.getElementById("lightboxClose"),
            btnPrev = document.getElementById("lightboxPrev"),
            btnNext = document.getElementById("lightboxNext"),
            arrowPrev = document.getElementById("lightboxArrowPrev"),
            arrowNext = document.getElementById("lightboxArrowNext"),
            wrap = document.getElementById("lightboxWrap");

      if (grid && lb && lbImg && lbTitle && lbCaption && btnClose && btnPrev && btnNext && arrowPrev && arrowNext && wrap) {
        const thumbs = Array.from(grid.querySelectorAll("img.card-media"));
        const items = thumbs.map(img => {
          const card = img.closest(".feature-card"),
                title = card?.querySelector("h3")?.textContent.trim() || "Preview",
                caption = card?.querySelector("p")?.textContent.trim() || img.alt || "";
          return {src: img.src, alt: img.alt, title, caption};
        });
        let current = 0, lastFocus = null;

        const openAt = i => {
          current = (i + items.length) % items.length;
          const it = items[current];
          lastFocus = document.activeElement;

          lb.classList.add("open");
          document.body.style.overflow = "hidden";

          lbImg.src = it.src;
          lbImg.alt = it.alt;
          lbTitle.textContent = it.title;
          lbCaption.textContent = it.caption;

          btnClose.focus();
        };

        const close = () => {
          lb.classList.remove("open");
          document.body.style.overflow = "";
          if(lastFocus && lastFocus.focus) lastFocus.focus();
        };

        thumbs.forEach((img, idx) => {
          img.setAttribute("role","button");
          img.setAttribute("tabindex","0");
          img.addEventListener("click",()=>openAt(idx));
          img.addEventListener("keydown",e=>{ if(e.key==="Enter"||e.key===" ") { e.preventDefault(); openAt(idx); } });
        });

        btnClose.addEventListener("click", close);
        btnPrev.addEventListener("click", ()=>openAt(current-1));
        btnNext.addEventListener("click", ()=>openAt(current+1));
        arrowPrev.addEventListener("click", ()=>openAt(current-1));
        arrowNext.addEventListener("click", ()=>openAt(current+1));

        lb.addEventListener("click",e => { if(e.target===lb) close(); });

        document.addEventListener("keydown",e => {
          if(!lb.classList.contains("open")) return;
          if(e.key==="Escape") close();
          if(e.key==="ArrowRight") openAt(current+1);
          if(e.key==="ArrowLeft") openAt(current-1);
        });
      }

    })();
  </script>
</body>
</html>
